<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cat Pics 🐈</title>
<style>
  body{font-family:system-ui;margin:0 auto;max-width:700px;padding:.5rem;background:#fafafa}
  header{display:flex;align-items:center;justify-content:space-between}
  img{max-width:100%;height:auto;border-radius:6px;margin-block:.3rem}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:.4rem}
  button,input{font-size:1rem;padding:.4rem .6rem}
  .hidden{display:none}
</style>
</head>
<body>
<header>
  <h1>Cat Pics 🐈</h1>
  <button id="addBtn">+ Add</button>
</header>

<input type="file" accept="image/*" id="fileIn" class="hidden"/>
<section class="grid" id="grid"></section>

<script src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js"></script>
<script>
/* ---------- config ---------- */
const store = localforage.createInstance({name:"catPics"});

/* ---------- DOM ---------- */
const fileIn = document.getElementById('fileIn');
const grid   = document.getElementById('grid');
document.getElementById('addBtn').onclick = () => fileIn.click();

/* ---------- load & render ---------- */
async function loadCats(){
  grid.innerHTML='';
  await store.iterate((dataURL, key)=>{
     const img = document.createElement('img');
     img.src = dataURL;
     img.onclick = ()=>{ if(confirm('Delete?')){ store.remove(key); loadCats(); } };
     grid.appendChild(img);
  });
}
loadCats();

/* ---------- save new pic ---------- */
fileIn.onchange = async ()=>{
  const file = fileIn.files[0]; if(!file) return;
  const reader = new FileReader();
  reader.onload = async e=>{
     await store.setItem( Date.now()+'_'+file.name, e.target.result );
     loadCats();
  };
  reader.readAsDataURL(file);
};
</script>
</body>
</html>
